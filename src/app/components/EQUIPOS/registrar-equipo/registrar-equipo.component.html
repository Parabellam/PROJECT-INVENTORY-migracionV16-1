<div
  *ngIf="
    permissions.permi4equ == 'gLM2KweKZBD5Rtw' ||
    permissions.permi4equ == 'CyJlhVqcyf4Yx5q'
  "
  class="calambombo"
>
  <div>
    <div
      class="container shadow-lg p-3 co w-50 rounded"
      data-aos="fade-right"
      data-aos-duration="900"
    >
      <h3 class="text-center">Registrar Equipo</h3>
      <hr class="" />
      <form action="" [formGroup]="myForm" class="form" method="post">
        <div class="card accordion co" id="accordionExample">
          <div class="accordion-item co">
            <h2 class="accordion-header" id="headingOne">
              <button
                class="accordion-button mt-3"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseOne"
                aria-expanded="true"
                aria-controls="collapseOne"
              >
                Clasificación de Inventario
              </button>
            </h2>
            <div
              id="collapseOne"
              class="accordion-collapse collapse show"
              aria-labelledby="headingOne"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <div *ngIf="clienteSeleccionado == 'Nexos'">
                  <label for="" class="pa">Tipo de Activo</label>
                  <select
                    name="parametro"
                    formControlName="Tipo_de_Activo"
                    id="select-parametro"
                    class="form-select"
                    [(ngModel)]="equipo.parametros.id"
                    (change)="fileParameter(equipo.parametros.id)"
                    (change)="onFileSelected(equipo.parametros.id)"
                  >
                    <option value="">---[Seleccione]</option>
                    <option *ngFor="let item of parametro" [value]="item.id">
                      {{ item.descripcion }}
                    </option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="">Tipo de Dispositivo</label>
                  <select
                    name="tipoDispositivo"
                    id="tipoDispositivo"
                    [(ngModel)]="equipo.tipo"
                    formControlName="Tipo_de_Dispositivo"
                    class="form-select mt-2"
                  >
                  <option value="">Seleccione</option>
                <option *ngFor="let item of tipo">{{item.valor}}</option>
                </select>
                </div>
                <div *ngIf="clienteSeleccionado == 'Nexos'" class="mt-2">
                  <label for="" class="pa">Código Equipo</label>
                  <input
                    type="filterValue"
                    name="codigo"
                    id="filterValue"
                    class="form-control"
                    [value]="filterValue"
                    [(ngModel)]="equipo.codigo_equipo"
                    disabled
                  />
                </div>
                <div *ngIf="clienteSeleccionado != 'Nexos'">
                  <label for="" class="pa">Tipo de Activo</label>
                  <select
                    name="parametro"
                    id="select-parametro"
                    class="form-select"
                    [(ngModel)]="equipo.parametros.id"
                  >
                    <option value="">---[Seleccione]</option>
                    <option *ngFor="let item of parametro" [value]="item.id">
                      {{ item.descripcion }}
                    </option>
                  </select>
                </div>
                <div *ngIf="clienteSeleccionado != 'Nexos'" class="mt-2">
                  <label for="" class="pa">Código Equipo</label>
                  <input
                    formControlName="Codigo_Equipo"
                    type="filterValue"
                    name="codigo"
                    id="filterValue"
                    class="form-control"
                    [(ngModel)]="equipo.codigo_equipo"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item co mt-2">
            <h2 class="accordion-header" id="headingTwo">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseTwo"
                aria-expanded="false"
                aria-controls="collapseTwo"
              >
                Características
              </button>
            </h2>
            <div
              id="collapseTwo"
              class="accordion-collapse collapse"
              aria-labelledby="headingTwo"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <div class="row">
                  <div class="col">
                    <div class="mt-2">
                      <label for="" class="pa">Marca</label>
                      <input
                        formControlName="Marca"
                        type="text"
                        name="marca"
                        id="marca"
                        class="form-control"
                        [(ngModel)]="equipo.marca"
                      />
                    </div>
                    <div class="mt-2">
                      <label for="" class="pa">Modelo</label>
                      <input
                        formControlName="Modelo"
                        type="text"
                        name="modelo"
                        id="modelo"
                        class="form-control"
                        [(ngModel)]="equipo.modelo"
                      />
                    </div>
                    <div class="mt-2">
                      <label for="" class="pa">Procesador</label>
                      <input
                        type="text"
                        formControlName="Procesador"
                        name="procesador"
                        id="procesador"
                        class="form-control"
                        [(ngModel)]="equipo.procesador"
                      />
                    </div>
                    <div class="mt-2">
                      <label for="" class="pa">Sistema Operativo</label>
                      <input
                        formControlName="Sistema_Operativo"
                        type="text"
                        name="os"
                        id="os"
                        class="form-control"
                        [(ngModel)]="equipo.os"
                      />
                    </div>
                  </div>
                  <div class="col">
                    <div class="mt-2">
                      <label for="" class="pa"> Memoria RAM</label>
                      <input
                        formControlName="Memoria_RAM"
                        type="text"
                        name="ram"
                        id="ram"
                        class="form-control"
                        [(ngModel)]="equipo.ram"
                      />
                    </div>
                    <div class="mt-2">
                      <label for="" class="pa">Almacenamiento</label>
                      <input
                        type="text"
                        formControlName="Almacenamiento"
                        name="almacenamiento"
                        id="almacenamiento"
                        class="form-control"
                        [(ngModel)]="equipo.almacenamiento"
                      />
                    </div>
                    <div class="mt-2">
                      <label for="" class="pa">Serial</label>
                      <input
                        formControlName="Serial"
                        type="text"
                        name="seriall"
                        id="serial"
                        class="form-control"
                        [(ngModel)]="equipo.seriall"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item co mt-2">
            <h2 class="accordion-header" id="headingThree">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseThree"
                aria-expanded="false"
                aria-controls="collapseThree"
              >
                Datos de Facturación
              </button>
            </h2>
            <div
              id="collapseThree"
              class="accordion-collapse collapse"
              aria-labelledby="headingThree"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <div class="mt-2">
                  <label for="" class="pa">Precio</label>
                  <input
                    formControlName="Precio"
                    type="text"
                    name="precio"
                    id="precio"
                    class="form-control"
                    [(ngModel)]="equipo.precio"
                    appOnlyNumbers
                    appSeparateThousands
                  />
                </div>
                <div class="mt-2">
                  <label for="" class="pa">N° Factura</label>
                  <input
                    formControlName="Numero_Factura"
                    type="text"
                    name="factura"
                    id="factura"
                    class="form-control"
                    [(ngModel)]="equipo.factura"
                  />
                </div>
                <div class="mt-2">
                  <label for="" class="pa">Orden de Compra</label>
                  <input
                    formControlName="Orden_de_Compra"
                    type="text"
                    name="orden_compra"
                    id="orden_compra"
                    class="form-control"
                    [(ngModel)]="equipo.orden"
                  />
                </div>
                <div class="mt-2">
                  <label for="" class="pa">Fecha Factura</label>
                  <input
                    formControlName="Fecha_Factura"
                    type="date"
                    name="fecha_factura"
                    id="fecha_factura"
                    class="form-control"
                    [(ngModel)]="equipo.fecha_factura"
                    (ngModelChange)="updateMinDate()"
                    [min]="minDate"
                    [max]="currentDate"
                  />
                </div>
                <div class="mt-2">
                  <label for="" class="pa">Ruta Archivo</label>
                  <input
                    type="text"
                    name="rutaArchivo"
                    id="rutaArchivo"
                    class="form-control"
                    [(ngModel)]="equipo.rutaArchivo"
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item co mt-2">
            <h2 class="accordion-header" id="headingFive">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseFive"
                aria-expanded="false"
                aria-controls="collapseFive"
              >
                Licencias
              </button>
            </h2>
            <div
              id="collapseFive"
              class="accordion-collapse collapse"
              aria-labelledby="headingFive"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <div class="mt-2">
                  <label for=""
                    >Licencias para este Equipo (Ctrl+Click para varios)</label
                  >
                  <select
                    multiple
                    [(ngModel)]="equipo.licencias"
                    name="clientes"
                    class="form-select"
                    (ngModelChange)="licenciasSeleccionados = $event"
                  >
                    <ng-container *ngFor="let item of licencias">
                      <option [value]="item" *ngIf="filtroLicencia(item)">
                        {{ item.nombre }}
                      </option>
                    </ng-container>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item co mt-2">
            <h2 class="accordion-header" id="headingFour">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseFour"
                aria-expanded="false"
                aria-controls="collapseFour"
              >
                Otros
              </button>
            </h2>
            <div
              id="collapseFour"
              class="accordion-collapse collapse"
              aria-labelledby="headingFour"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <div class="mt-2">
                  <label for="" class="pa">Ticket</label>
                  <input
                    type="text"
                    name="tiket"
                    id="tiket"
                    class="form-control"
                    [(ngModel)]="equipo.tiket"
                  />
                </div>
                <div class="mt-2">
                  <label for="" class="pa">Observaciones</label>
                  <textarea
                    formControlName="Observaciones"
                    name="observaciones"
                    cols="70"
                    rows="4"
                    class="form-control"
                    [(ngModel)]="equipo.observaciones"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
          <hr class="mt-3" />
          <div class="form-group mt-4 d-flex w-25">
            <button class="btn bot btn-sm" (click)="onCreateEquipo()">
              Agregar
            </button>
            <button class="btn botr btn-sm" [routerLink]="['/equipos/ver']">
              Regresar
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
